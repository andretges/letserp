<!DOCTYPE html>
<html>
<head>
  <!--
  http://www.starjammer-bulletin.com/bulletin/wp-content/uploads/2016/07/prestel.jpg
  https://en.wikipedia.org/wiki/List_of_8-bit_computer_hardware_palettes#BBC_Micro
  https://en.wikipedia.org/wiki/Colour_look-up_table
  https://fontstruct.com/gallery/tag/7561/Bbc%20Micro
  -->
  <!--
                          H                        
                        H E R                      
                      H E R E T                    
                    H E R E T G E                  
                  H E R E T G E . G                
                H E R E T G E . G I T              
              H E R E T G E . G I T H U            
            H E R E T G E . G I T H U B .          
          H E R E T G E . G I T H U B . I O        
        H E R E T G E . G I T H U B . I O / L      
      H E R E T G E . G I T H U B . I O / L E T    
    H E R E T G E . G I T H U B . I O / L E T S E  
  H E R E T G E . G I T H U B . I O / L E T S E R P
    R E T G E . G I T H U B . I O / L E T S E R P  
      T G E . G I T H U B . I O / L E T S E R P    
        E . G I T H U B . I O / L E T S E R P      
          G I T H U B . I O / L E T S E R P        
            T H U B . I O / L E T S E R P          
              U B . I O / L E T S E R P            
                . I O / L E T S E R P              
                  O / L E T S E R P                
                    L E T S E R P                  
                      T S E R P                    
                        E R P                      
                          P                        
  -->
  <meta charset="UTF-8">
  <title>LETSERP Gen</title>
  <style>
    @font-face {
      font-family: 'mallard_smoothregular';
      src: url('fonts/mallard_smooth-webfont.woff2') format('woff2'),
           url('fonts/mallard_smooth-webfont.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }
    body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      background: #111;
    }
    .page-content {
      position: relative;
      display: block;
      box-sizing: border-box;
      margin: 0 auto;
      padding: 0 20px;
      width: 100%;
      max-width: 1200px;
    }
    .headline {
      margin: 80px 0 55px;
      text-align: center;
      font: normal normal 6rem 'mallard_smoothregular', monospace;
      color: #fff;
    }
    .brand {
      cursor: default;
      user-select: none;
    }
    .headline small {
      position: absolute;
      font: normal normal 2rem 'mallard_smoothregular', monospace;
      color: #fff;
      top: 72px;
    }
    .headline span {
      transition: color .3s ease-out;
    }
    .headline a {
      color: #fff;
      text-decoration: none;
      border-bottom: 0.5px solid #fff;
      transition: border .3s ease-out;
    }
    .green {
      color: #0f0;
    }
    .red {
      color: #f00;
    }
    .cyan {
      color: #0ff;
    }
    .blue {
      color: #00f;
    }
    .white {
      color: #fff;
    }
    .magenta {
      color: #f0f;
    }
    .yellow {
      color: #ff0;
    }
    .input-wrap {
      position: relative;
    }
    .text-input {
      position: relative;
      display: block;
      box-sizing: border-box;
      width: 100%;
      padding: 15px 15px 8px;
      font: 2rem/48px 'mallard_smoothregular', monospace;
      text-transform: uppercase;
      text-indent: 20px;
      outline: none;
      margin-bottom: 15px;
      background: transparent;
      color: #777;
      border: 0;
    }
    label:before {
      content: '>';
      color: #777;
      position: absolute;
      left: 0;
      top: 0;
      box-sizing: border-box;
      padding: 15px 15px 8px;
      font: 2rem/48px 'mallard_smoothregular', monospace;
      text-transform: uppercase;
      outline: none;
      transition: color .5s;
    }
    .text-input::placeholder {
      transition: color .5s;
      color: #777;
    }
    .text-input:not(:placeholder-shown) + label:before,
    .text-input:focus + label:before,
    .text-input:not(:placeholder-shown),
    .text-input:focus::placeholder,
    .text-input:focus {
      color: #0a0;
    }
    .output {
      margin: 135px 0 50px;
      font: normal normal 3.5rem/2.5rem 'mallard_smoothregular', monospace;
      text-align: center;
      color: #fff;
      letter-spacing: 0.7rem;
    }
    .output::selection,
    .output span::selection,
    .output br::selection {
      background: #0a0;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="page-content">
    <h1 class="headline">
      <small>
        <a href="https://www.youtube.com/watch?v=szdbKz5CyhA" target="_blank" rel="nofollow" fancy>
          <span data-color="green">M</span><span data-color="red">a</span><span data-color="cyan">k</span><span data-color="blue">e</span>
          <span data-color="magenta">T</span><span data-color="yellow">h</span><span data-color="green">e</span>
          <span data-color="red">I</span><span data-color="cyan">n</span><span data-color="blue">t</span><span data-color="magenta">e</span><span data-color="yellow">r</span><span data-color="green">n</span><span data-color="red">e</span><span data-color="cyan">t</span>
          <span data-color="blue">F</span><span data-color="magenta">a</span><span data-color="yellow">n</span><span data-color="green">c</span><span data-color="red">y</span>
          <span data-color="cyan">A</span><span data-color="blue">g</span><span data-color="magenta">a</span><span data-color="yellow">i</span><span data-color="green">n</span>
        </a>
      </small>
      <span class="brand">
        <span class="yellow">L</span>
        <span class="magenta">E</span>
        <span class="white">T</span>
        <span class="blue">S</span>
        <span class="cyan">E</span>
        <span class="red">R</span>
        <span class="green">P</span>
      </span>
    </h1>

    <div class="input-wrap">
      <input id="input" type="text" class="text-input" placeholder="Odd word" input autofocus="true" autocapitalize="off" spellcheck="false">
      <label for="input"></label>
    </div>
    <div class="output" output></div>
  </div>

  <script>
    (function(){
      var COLORS = {
        green: '#0f0',
        red: '#f00',
        cyan: '#0ff',
        blue: '#00f',
        white: '#fff',
        magenta: '#f0f',
        yellow: '#ff0'
      };

      var COLOR_VALUES = Object.keys(COLORS).map(function(key) { return COLORS[key]; });
      var REVERSED_COLORS = COLOR_VALUES.slice().reverse();

      function odd(n) {
        return 2 * n + 1;
      }

      function spaces(count) {
        return Array.apply(null, Array(count)).map(function() { return String.fromCharCode(8199) + String.fromCharCode(8199) }).join('');
      }

      function reverse(str) {
        return str.split('').reverse().join('');
      }

      function colored(str, rev, slen, half) {
        var mirror = false;
        return str.split('').map(function(v, n) {
          n = rev ? 2 * slen + n : n;
          if (mirror) {
            var colors = n >= half ? REVERSED_COLORS : COLOR_VALUES;
          } else {
            var colors = COLOR_VALUES;
          }
          return '<span style="color: '+colors[n % COLOR_VALUES.length]+'">' + v.toUpperCase() + '</span>' + String.fromCharCode(8199);
        }).join('');
      }

      function cut(str, len, available, half, rev) {
        var slen = Math.floor((len - available) / 2);
        var spc = spaces(slen);

        if (rev) {
          str = reverse(str);
          str = reverse(str.slice(0, available));
        } else {
          str = str.slice(0, available);
        }

        return spc + colored(str, rev, slen, half) + spc;
      }

      function retardedNormal(str, len, half, n) {
        if (n < half) {
          return cut(str, len, odd(n), half);
        } else {
          n = len - n - 1;
          return cut(str, len, odd(n), half, true);
        }
      }

      function letserp(str) {
        var len = str.length;
        var half = Math.ceil(len / 2);
        var arr = Array.apply(null, Array(len));
        return arr.map(function(v, n) { return retardedNormal(str, len, half, n).slice(0, -1) + '<br>' }).join('');
      }

      function fire() {
        output.innerHTML = letserp(input.value);
      }

      function selectText(node) {
        if (document.selection) {
            var range = document.body.createTextRange();
            range.moveToElementText(node);
            range.select();
        } else if (window.getSelection) {
            var range = document.createRange();
            range.selectNodeContents(node);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
        }
      }

      var input = document.querySelector('[input]');
      var output = document.querySelector('[output]');
      var fancy = document.querySelector('[fancy]');

      fancy.addEventListener('mouseover', function(event){
        var color = event.target.dataset.color;
        event.target.classList.add(color);
        this.style.borderColor = COLORS[color];
      });
      fancy.addEventListener('mouseout', function(event){
        setTimeout(() => {
          event.target.classList.remove(event.target.dataset.color);
        }, 300);
      });
      fancy.addEventListener('mouseleave', function(event){
        setTimeout(() => {
          this.style.borderColor = COLORS['white'];
        }, 300);
      });
      input.addEventListener('keyup', function(event){
        if(event.keyCode === 13) fire();
      });
      output.addEventListener('click', function(){
        selectText(output);
      });
    })();
  </script>
</body>
</html>
